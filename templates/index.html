<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Learning Tables Game</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <h1>Welcome to the Learning Tables Game, mama!</h1>

    <h1>Welcome, {{ username }}!</h1>

    <!-- Global Progress Bar -->
    <div class="progress-container">
        <div class="progress-bar" style="width: {{ global_progress }}%;"></div>
    </div>

    <div class="modes">
        <a href="{{ url_for('index') }}"><button>Learn Tables</button></a>
        <a href="{{ url_for('choose') }}"><button>Choose Correct</button></a>
        <a href="{{ url_for('fill') }}"><button>Fill in the Blanks</button></a>
    </div>

    <h3>Select a table to learn:</h3>
    <div class="table-buttons">
        {% for i in range(1, 21) %}
            <button onclick="fetchTable({{ i }})">{{ i }}</button>
        {% endfor %}
    </div>

    <div id="table-result"></div> <!-- changed id -->

    <div class="calculator">
        <h2>Calculator</h2>
        <input type="number" id="num1" placeholder="First Number">
        <input type="number" id="num2" placeholder="Second Number">
      
        <div class="calculator-buttons">
          <button onclick="calculate('*')">ร</button>
          <button onclick="calculate('+')">+</button>
          <button onclick="calculate('-')">-</button>
          <button onclick="calculate('/')">รท</button>
        </div>
      
        <div class="result" id="calculator-result">Result: 0</div> <!-- changed id -->
    </div>

<script>
    function fetchTable(number) {
        fetch('/get_table', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/x-www-form-urlencoded',
            },
            body: 'number=' + number
        })
        .then(response => response.json())
        .then(data => {
            const resultDiv = document.getElementById('table-result'); // changed
            resultDiv.innerHTML = '<h3>Multiplication Table of ' + number + ':</h3><ul>';
            data.table.forEach(row => {
                resultDiv.innerHTML += '<li>' + row + '</li>';
            });
            resultDiv.innerHTML += '</ul>';
        })
        .catch(error => {
            console.error('Error:', error);
        });
    }

    function calculate(operation) {
        var num1 = parseFloat(document.getElementById('num1').value) || 0;
        var num2 = parseFloat(document.getElementById('num2').value) || 0;
        var result = 0;
      
        if (operation === '*') {
            result = num1 * num2;
        } else if (operation === '+') {
            result = num1 + num2;
        } else if (operation === '-') {
            result = num1 - num2;
        } else if (operation === '/') {
            if (num2 === 0) {
                result = 'Cannot divide by 0';
            } else {
                result = num1 / num2;
            }
        }
      
        document.getElementById('calculator-result').innerText = 'Result: ' + result; // changed
    }
</script>

</body>
</html>
